import{a as e}from"./ai-orchestrator-aGs9CcqA.js";const t={apiKeys:{gemini:"",chatgpt:"",claude:""},dailyUsage:{date:(new Date).toISOString().split("T")[0],count:0},usageLogs:[],settings:{selectedProvider:"gemini",providerModels:{gemini:"gemini-2.5-flash",chatgpt:"gpt-5.2",claude:"claude-sonnet-4-5-20250929"},temperature:.7,maxOutputTokens:1024,autoCopyEnabled:!0,autoCopyTone:"formal",instantToneStyle:"formal",translation:{defaultTargetLanguage:"ko",preserveLineBreaks:!0,showNotification:!0}},lastUsedTab:"tone"};async function s(){try{const e=await chrome.storage.local.get(null),s={...t,...e};return s.usageLogs||(s.usageLogs=[]),s.settings={...t.settings,...e.settings},s.settings.translation={...t.settings.translation,...e.settings?.translation},s.settings.providerModels={...t.settings.providerModels,...e.settings?.providerModels},"claude-4-5-sonnet"===s.settings.providerModels.claude&&(s.settings.providerModels.claude="claude-sonnet-4-5-20250929"),"claude-4-5-haiku"===s.settings.providerModels.claude&&(s.settings.providerModels.claude="claude-haiku-4-5-20251001"),"claude-3-5-sonnet-latest"===s.settings.providerModels.claude&&(s.settings.providerModels.claude="claude-3-5-sonnet-20241022"),"gemini-1.5-flash"===s.settings.providerModels.gemini&&(s.settings.providerModels.gemini="gemini-2.5-flash"),"gpt-4o-mini"===s.settings.providerModels.chatgpt&&(s.settings.providerModels.chatgpt="gpt-5.2"),s}catch(e){return t}}async function a(e){try{await chrome.storage.local.set(e)}catch(t){throw new Error("데이터 저장에 실패했습니다.")}}async function i(t){const i=await s(),o=(e[t.provider]||[]).find(e=>e.id===t.model),n=o?.pricePer1M||0,r=((t.inputTokens||0)+(t.outputTokens||0))/1e6*n,l=[{timestamp:Date.now(),...t,cost:r},...i.usageLogs||[]].slice(0,1e3);await a({usageLogs:l}),await async function(){const e=await s(),t=(new Date).toISOString().split("T")[0];let i=1;e.dailyUsage.date===t&&(i=e.dailyUsage.count+1);return await a({dailyUsage:{date:t,count:i}}),i}()}export{s as g,i as l};
