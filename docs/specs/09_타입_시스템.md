# 기능 상세 스펙 문서 - 09. 타입 시스템

> **문서 버전**: 2.5 (2026.01.05 Update)
> **작성일**: 2026-01-01
> **업데이트**: 2026-01-05 - Gemini 3 및 확장된 스토리지 스키마 반영
> **담당 모듈**: `src/types/`

---

## 1. 개요 (v2.5)

프로젝트의 유지보수성과 안정성을 위해 도메인별로 타입을 분리하여 관리합니다. `any` 타입 사용을 금지하며, 인터페이스 정의를 최우선으로 합니다.

---

## 2. 도메인별 타입 정의

### 2.1 AI 도메인 (`src/types/ai.ts`)
- **AIProvider**: `'gemini' | 'chatgpt' | 'claude'`
- **AITask**: `'tone-conversion' | 'translation'`
- **ToneType**: `'formal' | 'general' | 'friendly'`
- **AIServiceOptions**: AI 요청 시 필요한 옵션 (provider, model, apiKey 등).
- **AIApiResponse**: 톤 변환 결과 객체.

### 2.2 스토리지 도메인 (`src/types/storage.ts`)
- **AppStorage**: 전체 스토리지 스키마 (마이그레이션 및 UI 상태 포함).
- **UsageLog**: 실행 이력 상세 (비용, 토큰 포함).
- **TranslationSettings**: 번역 언어 및 알림 설정.
- **TargetLanguage**: 지원 언어 코드 (`ko`, `en`, `ja`, `zh-CN`).
- **LastUsedTab**: `'tone' | 'translation'` (탭 유지 상태).

### 2.3 UI 도메인 (`src/types/ui.ts`)
- **UI 관련 상태 및 컴포넌트 Props 정의**.
- **LoadingState**: `'idle' | 'loading' | 'success' | 'error'`

---

## 3. 핵심 인터페이스 상세

### 3.1 AI 서비스 옵션 (`AIServiceOptions`)
```typescript
export interface AIServiceOptions {
  provider: AIProvider;
  model: string;
  apiKey: string;
  targetLanguage?: string;
  tone?: ToneType; // 단일 톤 변환 시 사용
  temperature?: number;
  maxTokens?: number;
}
```

### 3.2 사용량 로그 (`UsageLog`)
```typescript
export interface UsageLog {
  timestamp: number;
  provider: AIProvider;
  model: string;
  task: 'tone-conversion' | 'translation';
  inputTokens?: number;
  outputTokens?: number;
  cost?: number; // 추정 비용 (USD)
}
```

---

## 4. 타입 활용 원칙

- **Read-only**: 스토리지에서 가져온 데이터는 가급적 읽기 전용으로 취급합니다.
- **Strict Null Check**: 선택적 필드(`?`)를 명확히 정의하여 런타임 에러를 방지합니다.
- **Zod (향후 도입 예정)**: 런타임 데이터 검증을 위해 도입을 검토 중입니다.

---

**문서 업데이트**: 2026-01-01
