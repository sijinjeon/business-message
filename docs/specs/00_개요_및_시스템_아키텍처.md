# 기능 상세 스펙 문서 - 00. 개요 및 시스템 아키텍처

> **문서 버전**: 2.3 (2026 Update)
> **작성일**: 2026-01-01
> **업데이트**: 2026-01-01 - AIOrchestrator 및 StorageService 고도화 반영
> **프로젝트**: 비즈니스 커뮤니케이션 어시스턴트 (BCA)

---

## 1. 시스템 개요 (v2.3 변경사항)

### 1.1 프로젝트 정보
**버전**: 2.3.0
**개발 상태**: v2.3 완료 (AI Orchestrator 패턴 및 상세 사용량 통계 도입)

### 1.2 확장된 목표
- **AIOrchestrator 도입**: 제공자별 파편화된 로직을 통합하여 확장성 확보
- **상세 사용량 추적**: 일일 사용량 및 모델별 비용 추정 로그 시스템 구축
- **최신 모델 대응**: 2026년 기준 최신 AI 모델(Gemini 2.5, GPT-5.2, Claude 4.5) 최적화

---

## 2. 전체 아키텍처 (v2.3 최신화)

### 2.1 시스템 구조도 변경
- **Service Layer 중심 설계**: UI와 비즈니스 로직의 완전한 분리
- **StorageService**: `chrome.storage.local`을 래핑하여 타입 안정성 및 자동 마이그레이션 지원

```
Service Layer (Business Logic)
├── AI Service (src/services/ai/)
│   ├── AIOrchestrator (통합 제어)
│   ├── BaseAIProvider (추상 인터페이스)
│   └── Providers (Gemini, OpenAI, Claude 전용 어댑터)
├── Storage Service (src/services/storage-service.ts)
│   ├── CRUD 인터페이스
│   └── Schema Migration (2026 모델 자동 전환)
└── Utility Layer
    ├── Translation (src/utils/translation.ts)
    └── Crypto (src/utils/crypto.ts)
```

---

## 3. 최신 기술 스택 (2026)

| 기술 | 버전 | 역할 |
|------|------|------|
| **Vite** | 7.0.0 | 초고속 빌드 및 HMR |
| **TypeScript** | 5.7.2 | Strict 모드 기반 타입 안정성 |
| **AI Models** | 2026 Latest | Gemini 2.5-flash, GPT-5.2, Claude 4.5 |

---

## 5. 데이터 흐름 (v2.3 고도화)

### 5.1 사용량 로그 기록 흐름
1. AI 응답 수신 시 `AIOrchestrator`에서 결과 반환
2. `utils/storage.ts`의 `logUsage` 함수 호출
3. 사용된 토큰 수(입력/출력) 및 모델별 단가(pricePer1M)를 기준으로 비용 계산
4. `usageLogs` 배열에 타임스탬프와 함께 저장 (최근 1000개 유지)
5. `dailyUsage` 카운트 업데이트

---

**문서 업데이트**: 2026-01-01
