/* empty css               */function e(){const e=window.getSelection(),t=e?.toString()||"";if(!t||!e||0===e.rangeCount)return t;const n=document.activeElement;if(n instanceof HTMLTextAreaElement||n instanceof HTMLInputElement)return t;try{const t=e.getRangeAt(0),n=document.createElement("span");n.id="bca-selection-loading",n.className="bca-loading-container";const o=document.createElement("span");o.className="bca-spinner";const s=document.createElement("span");s.innerText=" 처리 중...",s.style.marginLeft="4px",s.style.fontSize="1.0em",s.style.color="#6b7280",n.appendChild(o),n.appendChild(s);const a=t.cloneRange();a.collapse(!1),a.insertNode(n)}catch(o){}return t}chrome.runtime.onMessage.addListener((t,n,o)=>{switch(t.action){case"PING":o({success:!0,message:"pong"});break;case"GET_SELECTED_TEXT":o({text:e()});break;case"REMOVE_LOADING":const n=document.getElementById("bca-selection-loading");n&&n.remove(),o({success:!0});break;case"REPLACE_SELECTED_TEXT":!function(e,t=!1){const n=document.getElementById("bca-selection-loading");n&&n.remove();const o=window.getSelection();if(!o||0===o.rangeCount)return;const s=o.getRangeAt(0),a=document.activeElement;if(a instanceof HTMLTextAreaElement||a instanceof HTMLInputElement){const n=a.selectionStart||0,o=a.selectionEnd||0,s=a.value;if(t){const t=`${s.includes("\n")?"\n":" "}[번역] ${e}`;a.value=s.slice(0,o)+t+s.slice(o),a.selectionStart=a.selectionEnd=o+t.length}else a.value=s.slice(0,n)+e+s.slice(o),a.selectionStart=a.selectionEnd=n+e.length;return}if(t){s.collapse(!1);const t=document.createElement("div");t.className="bca-translation-block",t.style.color="#2563eb",t.style.fontSize="0.95em",t.style.marginTop="8px",t.style.marginBottom="8px",t.style.padding="8px 12px",t.style.borderLeft="3px solid #3b82f6",t.style.backgroundColor="rgba(59, 130, 246, 0.05)",t.style.whiteSpace="pre-wrap",t.style.borderRadius="4px",t.style.lineHeight="1.6",t.style.display="block",t.style.fontFamily="sans-serif",t.style.textAlign="left",t.textContent=e;try{s.insertNode(t),o.removeAllRanges()}catch(c){s.insertNode(document.createTextNode(` [번역: ${e}]`))}}else try{document.execCommand("insertText",!1,e)||(s.deleteContents(),s.insertNode(document.createTextNode(e)))}catch(c){s.deleteContents(),s.insertNode(document.createTextNode(e))}}(t.text,t.append),o({success:!0});break;case"SHOW_TOAST":!function(e,t="info"){const n=document.getElementById("bca-toast-container");n&&n.remove();const o=document.createElement("div");o.id="bca-toast-container",Object.assign(o.style,{position:"fixed",bottom:"32px",right:"32px",padding:"14px 24px",borderRadius:"14px",backgroundColor:"error"===t?"#ef4444":"#18181b",color:"#ffffff",fontSize:"16px",fontWeight:"600",boxShadow:"0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05)",zIndex:"2147483647",display:"flex",alignItems:"center",gap:"8px",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",opacity:"0",transform:"translateY(20px)",fontFamily:'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif'});const s="error"===t?"❌":"success"===t?"✅":"ℹ️";o.innerHTML=`<span>${s}</span> <span>${e}</span>`,document.body.appendChild(o),requestAnimationFrame(()=>{o.style.opacity="1",o.style.transform="translateY(0)"}),setTimeout(()=>{o.style.opacity="0",o.style.transform="translateY(20px)",setTimeout(()=>o.remove(),300)},3e3)}(t.message,t.type),o({success:!0});break;default:o({error:"Unknown action"})}return!0});
