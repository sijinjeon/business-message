import{c as e,j as a,a as t,r as s,i as n,B as i,C as r,d as l,S as c,f as o,M as d,L as x,g as m,h as p,e as u,R as h}from"./storage-service-DubB-ORg.js";import{d as g,e as f,A as b}from"./crypto-ex6r7ieV.js";import{l as y}from"./storage-Ce3jUJWf.js";/* empty css               */
/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v=e("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),j=e("clipboard",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}]]),w=e("command",[["path",{d:"M15 6v12a3 3 0 1 0 3-3H6a3 3 0 1 0 3 3V6a3 3 0 1 0-3 3h12a3 3 0 1 0-3-3",key:"11bfej"}]]),N=e("copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]),z=e("rotate-cw",[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8",key:"1p45f6"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}]]),k=e("sparkles",[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]]);function C({className:e,...s}){return a.jsx("div",{className:t("animate-pulse rounded-md bg-primary/10",e),...s})}const S=s.forwardRef(({className:e,...s},n)=>a.jsx("textarea",{className:t("flex min-h-[60px] w-full rounded-md border border-input bg-transparent px-4 py-3 text-base shadow-sm placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",e),ref:n,...s}));S.displayName="Textarea";const T=n.memo(({value:e,onChange:t,maxLength:s,placeholder:n})=>{const i=e.length,r=s>0,l=r&&i>s;return a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"relative group",children:[a.jsx(S,{value:e,onChange:e=>t(e.target.value),placeholder:n,className:"min-h-[120px] resize-none p-5 rounded-2xl bg-zinc-50/50 border-zinc-100 transition-all duration-300 focus-visible:ring-zinc-900/5 focus-visible:ring-offset-0 focus-visible:border-zinc-300 focus-visible:bg-white text-base leading-relaxed "+(l?"border-destructive focus-visible:border-destructive focus-visible:ring-destructive/10":""),maxLength:r?s+50:void 0}),a.jsx("div",{className:"absolute bottom-4 right-4 flex items-center gap-2",children:a.jsxs("span",{className:"text-[12px] font-bold px-2 py-1 rounded-md bg-white border border-zinc-200/50 "+(l?"text-destructive border-destructive/20 bg-destructive/5":"text-zinc-400"),children:[i.toLocaleString(),r?` / ${s}`:" 자"]})})]}),l&&a.jsxs("p",{className:"text-[13px] text-destructive mt-1 font-medium px-1 animate-in fade-in slide-in-from-top-1",children:["글자 수가 제한을 초과했습니다. ",s,"자 이내로 줄여주세요."]})]})}),L=s.forwardRef(({className:e,...s},n)=>a.jsx("div",{ref:n,className:t("rounded-xl border bg-card text-card-foreground shadow",e),...s}));L.displayName="Card";const M=s.forwardRef(({className:e,...s},n)=>a.jsx("div",{ref:n,className:t("flex flex-col space-y-1.5 p-6",e),...s}));M.displayName="CardHeader";const R=s.forwardRef(({className:e,...s},n)=>a.jsx("div",{ref:n,className:t("font-semibold leading-none tracking-tight",e),...s}));R.displayName="CardTitle";s.forwardRef(({className:e,...s},n)=>a.jsx("div",{ref:n,className:t("text-sm text-muted-foreground",e),...s})).displayName="CardDescription";const K=s.forwardRef(({className:e,...s},n)=>a.jsx("div",{ref:n,className:t("p-6 pt-0",e),...s}));K.displayName="CardContent";s.forwardRef(({className:e,...s},n)=>a.jsx("div",{ref:n,className:t("flex items-center p-6 pt-0",e),...s})).displayName="CardFooter";const P={formal:"비즈니스 이메일",general:"사내 메신저",friendly:"캐주얼 채팅"},A=n.memo(({tone:e,text:t,onCopy:n,isDefaultSelected:l=!1})=>{const[c,o]=s.useState(!1),d=P[e];return a.jsxs(L,{className:"group relative transition-all duration-300 rounded-2xl border-zinc-100 "+(l?"bg-zinc-50/50 border-zinc-200":"bg-white hover:bg-zinc-50/30 hover:border-zinc-200 shadow-none"),children:[a.jsx(M,{className:"pb-3 px-5 pt-4",children:a.jsxs(R,{className:"text-[15px] font-bold flex items-center justify-between text-zinc-800",children:[a.jsxs("span",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"w-2 h-2 rounded-full "+(l?"bg-zinc-900":"bg-zinc-200")}),d]}),a.jsxs("div",{className:"flex items-center gap-2",children:[l&&a.jsx("span",{className:"text-[12px] font-bold text-zinc-500 bg-zinc-100 px-2 py-0.5 rounded-md border border-zinc-200/50",children:"기본 설정"}),a.jsx(i,{variant:"ghost",size:"sm",onClick:async()=>{try{await n(t),o(!0),setTimeout(()=>o(!1),2e3)}catch(e){}},className:"h-8 w-8 p-0 rounded-lg hover:bg-zinc-100 transition-colors opacity-0 group-hover:opacity-100",children:c?a.jsx(r,{className:"h-4 w-4 text-green-600"}):a.jsx(N,{className:"h-4 w-4 text-zinc-400"})})]})]})}),a.jsx(K,{className:"px-5 pb-5 pt-0",children:a.jsx("div",{className:"text-[16px] leading-[1.6] text-zinc-600 break-words break-keep-all whitespace-pre-wrap",children:t})})]})}),E=n.memo(({onRegenerate:e,onReadClipboard:t,isLoading:s,onOpenSettings:n,activeTab:r})=>a.jsx("div",{className:"flex items-center justify-between py-2 border-y border-zinc-100 my-2",children:a.jsxs("div",{className:"flex items-center gap-3 w-full",children:[a.jsxs(i,{variant:"outline",size:"sm",onClick:t,disabled:s,className:"flex-1 flex items-center justify-center gap-2 text-sm font-medium border-zinc-200 hover:bg-zinc-50 transition-all rounded-xl h-10",children:[a.jsx(j,{className:"h-4 w-4"}),"붙여넣기"]}),a.jsxs(i,{variant:"default",size:"sm",onClick:e,disabled:s,className:"flex-[1.5] flex items-center justify-center gap-2 text-sm font-bold bg-zinc-900 text-zinc-50 hover:bg-zinc-800 transition-all rounded-xl h-10 shadow-none",children:[a.jsx(z,{className:"h-4 w-4 "+(s?"animate-spin":"")}),s?"tone"===r?"변환 중...":"번역 중...":"tone"===r?"메시지 변환":"전문 번역 실행"]}),a.jsx(i,{variant:"ghost",size:"sm",onClick:n,className:"h-10 w-10 p-0 rounded-xl hover:bg-zinc-100 transition-all border border-transparent hover:border-zinc-200",children:a.jsx(l,{className:"h-4 w-4 text-zinc-500"})})]})}));async function U(){try{if(!navigator.clipboard||!navigator.clipboard.readText)throw new Error("클립보드 접근이 지원되지 않습니다.");return(await navigator.clipboard.readText()).trim()}catch(e){return""}}async function D(e){try{if(!navigator.clipboard||!navigator.clipboard.writeText)throw new Error("클립보드 접근이 지원되지 않습니다.");await navigator.clipboard.writeText(e)}catch(a){throw new Error("클립보드 복사에 실패했습니다.")}}function O(){const{settings:e,apiKeys:t,lastUsedTab:n,isLoading:i,updateLastUsedTab:r}=function(){const[e,a]=s.useState(null),[t,n]=s.useState({gemini:"",chatgpt:"",claude:""}),[i,r]=s.useState("tone"),[l,o]=s.useState(!0),d=s.useCallback(async()=>{o(!0);try{const e=await c.getAll();a(e.settings),r(e.lastUsedTab);const t={gemini:e.apiKeys.gemini?await g(e.apiKeys.gemini):"",chatgpt:e.apiKeys.chatgpt?await g(e.apiKeys.chatgpt):"",claude:e.apiKeys.claude?await g(e.apiKeys.claude):""};n(t)}catch(e){}finally{o(!1)}},[]);return s.useEffect(()=>{d()},[d]),{settings:e,apiKeys:t,lastUsedTab:i,isLoading:l,updateSettings:async e=>{await c.updateSettings(e),a(a=>a?{...a,...e}:null)},updateApiKey:async(e,a)=>{const t=await f(a);await c.saveApiKey(e,t),n(t=>({...t,[e]:a}))},updateLastUsedTab:async e=>{await c.update({lastUsedTab:e}),r(e)},refresh:d}}(),{execute:l,loadingState:h,error:j}=function(){const[e,a]=s.useState("idle"),[t,n]=s.useState(null);return{execute:s.useCallback(async(e,t,s)=>{a("loading"),n(null);try{const n=await b.execute(e,t,s);return a("success"),n}catch(i){return a("error"),n(i.message||"AI 서비스 호출 중 오류가 발생했습니다."),null}},[]),loadingState:e,error:t,reset:()=>{a("idle"),n(null)}}}(),[N,z]=s.useState(""),[S,L]=s.useState(null),[M,R]=s.useState(null),[K,P]=s.useState("tone"),[O,q]=s.useState("ko"),[B,F]=s.useState(""),[H,I]=s.useState("");s.useEffect(()=>{e&&(q(e.translation.defaultTargetLanguage),P(n))},[e?.translation.defaultTargetLanguage,n]),s.useEffect(()=>{(async()=>{const e=await chrome.storage.local.get(["lastCommand","commandTimestamp"]),a=Date.now();if(e.lastCommand&&e.commandTimestamp&&a-e.commandTimestamp<2e3){const a=await U();a&&(z(a),"_execute_action"===e.lastCommand?(P("translation"),await r("translation"),await _(a,"translation")):"tone-conversion"===e.lastCommand&&(P("tone"),await r("tone"),await _(a,"tone"))),await chrome.storage.local.remove(["lastCommand","commandTimestamp"])}else{const e=await U();e&&!N&&z(e)}})()},[]);const _=async(a,s)=>{const n=a||N,i=s||K;if(!n.trim()||!e)return void $("내용을 입력해주세요.","error");const r=t[e.selectedProvider];if(!r)return void $(`${e.selectedProvider} API 키가 설정되지 않았습니다.`,"error");const c=await l(n,"tone"===i?"tone-conversion":"translation",{provider:e.selectedProvider,model:e.providerModels[e.selectedProvider],apiKey:r,targetLanguage:"translation"===i?O:void 0});if(c){if("tone"===i){const a=c;L(a),e.autoCopyEnabled&&(await D(a[e.autoCopyTone]),$("✨ 변환 및 복사가 완료되었습니다.","success"))}else R(c),$("✨ 번역이 완료되었습니다.","success");await y({provider:e.selectedProvider,model:e.providerModels[e.selectedProvider],task:"tone"===i?"tone-conversion":"translation",inputTokens:Math.ceil(.75*n.length),outputTokens:Math.ceil(.75*("string"==typeof c?c.length:JSON.stringify(c).length))})}},$=(e,a)=>{F(e),I(a),setTimeout(()=>{F(""),I("")},3e3)},J=async e=>{P(e),L(null),R(null),await r(e)};return i?a.jsx("div",{className:"w-[800px] h-[600px] flex items-center justify-center",children:a.jsx(o,{className:"animate-spin text-zinc-400"})}):a.jsxs("div",{className:"w-[800px] h-[600px] bg-white relative flex flex-col overflow-hidden selection:bg-zinc-900/10",children:[a.jsxs("header",{className:"px-6 py-4 flex items-center justify-between border-b border-zinc-100 shrink-0",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-9 h-9 rounded-xl bg-zinc-900 flex items-center justify-center",children:a.jsx(w,{className:"w-5 h-5 text-white"})}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-[16px] font-bold tracking-tight text-zinc-900 leading-none",children:"BCA Assistant"}),a.jsx("p",{className:"text-[12px] text-zinc-400 font-medium mt-1 uppercase tracking-[0.1em]",children:"Smart Communication"})]})]}),a.jsxs("div",{className:"flex bg-zinc-100 p-1 rounded-xl",children:[a.jsx(V,{active:"tone"===K,onClick:()=>J("tone"),icon:a.jsx(d,{className:"w-3.5 h-3.5"}),label:"톤 변환"}),a.jsx(V,{active:"translation"===K,onClick:()=>J("translation"),icon:a.jsx(x,{className:"w-3.5 h-3.5"}),label:"전문 번역"})]})]}),a.jsxs("main",{className:"flex-1 overflow-y-auto custom-scrollbar p-6 space-y-5",children:[a.jsxs("section",{className:"space-y-3",children:[a.jsxs("div",{className:"flex items-center justify-between px-1",children:[a.jsxs("h2",{className:"text-[13px] font-bold text-zinc-400 uppercase tracking-widest flex items-center gap-2",children:[a.jsx(k,{className:"w-3 h-3"}),"tone"===K?"메시지 작성":"원문 입력"]}),a.jsx("div",{className:"flex gap-2",children:"translation"===K&&a.jsx("div",{className:"w-28",children:a.jsxs(m,{value:O,onValueChange:e=>q(e),children:[a.jsx(p,{value:"ko",className:"text-sm",children:"한국어"}),a.jsx(p,{value:"en",className:"text-sm",children:"영어"}),a.jsx(p,{value:"ja",className:"text-sm",children:"일본어"}),a.jsx(p,{value:"zh-CN",className:"text-sm",children:"중국어"})]})})})]}),a.jsx(T,{value:N,onChange:z,maxLength:5e3,placeholder:"tone"===K?"다듬고 싶은 메시지를 입력하세요...":"번역할 내용을 입력하세요..."}),a.jsx(E,{onRegenerate:()=>_(),onReadClipboard:async()=>{const e=await U();e&&(z(e),await _(e))},isLoading:"loading"===h,onOpenSettings:()=>{"undefined"!=typeof chrome&&chrome.runtime&&chrome.runtime.openOptionsPage?(chrome.runtime.openOptionsPage(),window.close()):window.open("../options/index.html","_blank")},activeTab:K})]}),(B||j)&&a.jsxs("div",{className:"p-4 rounded-2xl border flex items-start gap-3 animate-in fade-in slide-in-from-top-2 duration-300 "+("error"===H||j?"bg-destructive/5 border-destructive/10 text-destructive":"bg-zinc-50 border-zinc-100 text-zinc-900"),children:[a.jsx(v,{className:"w-4 h-4 mt-0.5 shrink-0"}),a.jsx("p",{className:"text-[15px] font-medium",children:j||B})]}),a.jsxs("section",{className:"space-y-5",children:[a.jsx("h2",{className:"text-[14px] font-bold text-zinc-400 uppercase tracking-widest px-1",children:"결과 영역"}),a.jsxs("div",{className:"grid grid-cols-1 gap-5",children:["loading"===h&&a.jsxs(a.Fragment,{children:[a.jsx(C,{className:"h-[120px] rounded-2xl bg-zinc-50"}),"tone"===K&&a.jsx(C,{className:"h-[120px] rounded-2xl bg-zinc-50"})]}),"tone"===K&&S&&a.jsxs(a.Fragment,{children:[a.jsx(A,{tone:"formal",text:S.formal,onCopy:D,isDefaultSelected:"formal"===e?.autoCopyTone}),a.jsx(A,{tone:"general",text:S.general,onCopy:D,isDefaultSelected:"general"===e?.autoCopyTone}),a.jsx(A,{tone:"friendly",text:S.friendly,onCopy:D,isDefaultSelected:"friendly"===e?.autoCopyTone})]}),"translation"===K&&M&&a.jsxs("div",{className:"p-6 rounded-2xl border border-zinc-100 bg-zinc-50/50 space-y-4",children:[a.jsx("p",{className:"text-[16px] leading-relaxed text-zinc-900 whitespace-pre-wrap",children:M}),a.jsx("div",{className:"flex justify-end",children:a.jsx("button",{onClick:()=>{D(M),$("✨ 클립보드에 복사되었습니다.","success")},className:"text-[13px] font-bold text-zinc-400 hover:text-zinc-900 uppercase tracking-wider transition-colors",children:"Copy to Clipboard"})})]}),"idle"===h&&!S&&!M&&a.jsxs("div",{className:"py-20 flex flex-col items-center justify-center text-zinc-300 border border-dashed border-zinc-100 rounded-3xl",children:[a.jsx(k,{className:"w-10 h-10 mb-4 opacity-20"}),a.jsxs("p",{className:"text-base font-medium",children:["준비되었습니다. ","tone"===K?"변환":"번역","을 시작해 보세요."]})]})]})]})]}),a.jsxs("footer",{className:"px-8 py-4 border-t border-zinc-50 flex items-center justify-between text-[12px] text-zinc-400 font-bold uppercase tracking-widest shrink-0",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(u,{className:"w-3 h-3"}),"Secured by ",e?.selectedProvider.toUpperCase()]}),a.jsx("div",{children:"v2.3.0"})]})]})}function V({active:e,onClick:t,icon:s,label:n}){return a.jsxs("button",{onClick:t,className:"flex items-center gap-2 px-4 py-1.5 rounded-lg text-[14px] font-bold transition-all "+(e?"bg-white text-zinc-900 shadow-sm":"text-zinc-400 hover:text-zinc-600"),children:[s,n]})}h.createRoot(document.getElementById("root")).render(a.jsx(n.StrictMode,{children:a.jsx(O,{})}));
