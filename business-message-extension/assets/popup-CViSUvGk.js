import{j as e,c as s,r as a,R as t,a as r,C as n,b as i,d as l,e as c,B as o,g as d,f as m,h as x,u as g,A as h,i as u,k as p}from"./global-BZwDt49Z.js";function f({className:a,...t}){return e.jsx("div",{className:s("animate-pulse rounded-md bg-primary/10",a),...t})}const j=a.forwardRef(({className:a,...t},r)=>e.jsx("textarea",{className:s("flex min-h-[60px] w-full rounded-md border border-input bg-transparent px-3 py-2 text-base shadow-sm placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),ref:r,...t}));j.displayName="Textarea";const y=t.memo(({value:s,onChange:a,maxLength:t,placeholder:r})=>{const n=s.length,i=n>t;return e.jsxs("div",{className:"space-y-2",children:[e.jsx(j,{value:s,onChange:e=>a(e.target.value),placeholder:r,className:"min-h-[120px] resize-none "+(i?"border-destructive focus:border-destructive":""),maxLength:t+50}),e.jsx("div",{className:"flex justify-end",children:e.jsxs("span",{className:"text-xs "+(i?"text-destructive":"text-muted-foreground"),children:[n,"/",t]})}),i&&e.jsxs("p",{className:"text-xs text-destructive",children:["텍스트가 너무 깁니다. ",t,"자 이내로 입력해주세요."]})]})}),w=r("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]),v=r("copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]),N=r("rotate-cw",[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8",key:"1p45f6"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}]]),b=r("settings",[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),C={formal:"격식",general:"일반",friendly:"친근"},M=t.memo(({tone:s,text:t,onCopy:r,isDefaultSelected:d=!1})=>{const[m,x]=a.useState(!1),g=C[s];return e.jsxs(n,{className:"relative "+(d?"ring-2 ring-primary":""),children:[e.jsx(i,{className:"pb-2",children:e.jsxs(l,{className:"text-sm font-medium flex items-center justify-between",children:[e.jsx("span",{children:g}),d&&e.jsx("span",{className:"text-xs text-primary bg-primary/10 px-2 py-1 rounded",children:"기본 선택"})]})}),e.jsxs(c,{className:"pt-0",children:[e.jsx("p",{className:"text-sm leading-relaxed mb-3 min-h-[60px]",children:t}),e.jsx("div",{className:"flex justify-end",children:e.jsx(o,{variant:"ghost",size:"sm",onClick:async()=>{try{await r(t),x(!0),setTimeout(()=>x(!1),2e3)}catch(e){}},className:"h-8 w-8 p-0",children:m?e.jsx(w,{className:"h-4 w-4 text-green-600"}):e.jsx(v,{className:"h-4 w-4"})})})]})]})}),k=t.memo(({onRegenerate:s,remainingCount:a,isLoading:t,onOpenSettings:r})=>e.jsxs("div",{className:"flex items-center justify-between py-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(o,{variant:"secondary",size:"sm",onClick:s,disabled:t||a<=0,className:"flex items-center gap-2",children:[e.jsx(N,{className:"h-4 w-4 "+(t?"animate-spin":"")}),"다시 생성"]}),e.jsx(o,{variant:"ghost",size:"sm",onClick:r,className:"flex items-center gap-1",children:e.jsx(b,{className:"h-4 w-4"})})]}),e.jsx("div",{className:"text-xs text-muted-foreground",children:a>0?e.jsxs(e.Fragment,{children:["오늘 남은 횟수: ",e.jsxs("span",{className:"font-medium",children:[a,"/5"]})]}):e.jsx("span",{className:"text-destructive font-medium",children:"오늘 사용량을 모두 사용하셨습니다"})})]}));async function S(e){try{if(!navigator.clipboard||!navigator.clipboard.writeText)throw new Error("클립보드 접근이 지원되지 않습니다.");await navigator.clipboard.writeText(e)}catch(s){throw new Error("클립보드 복사에 실패했습니다.")}}const T={inputText:"",results:null,loadingState:"idle",errorMessage:"",remainingUsage:5};function E(){const[s,t]=a.useState(T);a.useEffect(()=>{r()},[]);const r=async()=>{try{const e=await async function(){try{if(!navigator.clipboard||!navigator.clipboard.readText)throw new Error("클립보드 접근이 지원되지 않습니다.");return(await navigator.clipboard.readText()).trim()}catch(e){return""}}(),s=await d();t(a=>({...a,inputText:e,remainingUsage:s})),e&&s>0&&await n(e)}catch(e){}},n=async e=>{const a=e||s.inputText;if(a.trim())if(a.length>500)t(e=>({...e,errorMessage:"텍스트가 너무 깁니다. 500자 이내로 입력해주세요."}));else if(s.remainingUsage<=0)t(e=>({...e,errorMessage:"오늘의 무료 사용량을 모두 사용하셨습니다."}));else{t(e=>({...e,loadingState:"loading",errorMessage:"",results:null}));try{const e=await m();if(!e)throw new Error("API 키가 설정되지 않았습니다. 설정 페이지에서 API 키를 입력해주세요.");const s=await x(a,e),r=await g(),n=Math.max(0,5-r);await S(s.formal),t(e=>({...e,loadingState:"success",results:s,remainingUsage:n}))}catch(r){t(e=>({...e,loadingState:"error",errorMessage:r instanceof Error?r.message:"알 수 없는 오류가 발생했습니다."}))}}else t(e=>({...e,errorMessage:"변환할 텍스트를 입력해주세요."}))},i=a.useCallback(async e=>{await S(e)},[]),l=a.useCallback(()=>{chrome.runtime.openOptionsPage()},[]),c=a.useCallback(e=>{t(s=>({...s,inputText:e,errorMessage:""}))},[]);return e.jsxs("div",{className:"w-full h-full p-4 space-y-4",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsx("h1",{className:"text-lg font-semibold",children:"정중한 문장 도우미"})}),e.jsx(y,{value:s.inputText,onChange:c,maxLength:500,placeholder:"변환할 텍스트를 복사하거나, 직접 입력해주세요."}),e.jsx(k,{onRegenerate:()=>n(),remainingCount:s.remainingUsage,isLoading:"loading"===s.loadingState,onOpenSettings:l}),s.errorMessage&&e.jsx(h,{variant:"destructive",children:e.jsx(u,{children:s.errorMessage})}),e.jsxs("div",{className:"space-y-3",children:["loading"===s.loadingState&&e.jsxs(e.Fragment,{children:[e.jsx(f,{className:"h-32"}),e.jsx(f,{className:"h-32"}),e.jsx(f,{className:"h-32"})]}),s.results&&e.jsxs(e.Fragment,{children:[e.jsx(M,{tone:"formal",text:s.results.formal,onCopy:i,isDefaultSelected:!0}),e.jsx(M,{tone:"general",text:s.results.general,onCopy:i}),e.jsx(M,{tone:"friendly",text:s.results.friendly,onCopy:i})]})]})]})}p.createRoot(document.getElementById("root")).render(e.jsx(t.StrictMode,{children:e.jsx(E,{})}));
